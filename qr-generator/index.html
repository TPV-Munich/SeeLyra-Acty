
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QR Code Generator (Offline)</title>
<style>
  :root{
    --brand:#089CA4;         /* your theme color */
    --brand-600:#078992;
    --panel:#ffffff;
    --text:#0b1f22;
    --muted:#5a6a6d;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:linear-gradient(135deg,#e9fbfd 0%, #ffffff 55%);
    color:var(--text);
  }
  header{ padding:20px 16px 0; text-align:center; }
  .title{ font-size:clamp(20px,3vw,28px); font-weight:700; color:#05565c; }
  .wrap{
    max-width:980px; margin:18px auto 40px; padding:0 16px 32px;
    display:grid; grid-template-columns: 1.1fr .9fr; gap:22px;
  }
  @media (max-width:900px){ .wrap{grid-template-columns:1fr} }
  .card{
    background:var(--panel);
    border:1px solid #e6f5f7;
    border-radius:14px;
    box-shadow:0 6px 20px rgba(8,156,164,.10);
    padding:18px;
  }
  .card h2{ margin:0 0 12px; font-size:18px; color:#05565c; }
  label{ display:block; font-size:13px; color:var(--muted); margin:12px 0 6px; }
  .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  textarea, select, input[type="number"], input[type="color"]{
    width:100%; padding:10px 12px; border:1px solid #cfecef; border-radius:10px;
    outline:none; background:#f7feff; color:#033c41;
  }
  textarea{ min-height:84px; resize:vertical; }
  textarea:focus, select:focus, input:focus{
    border-color:var(--brand); box-shadow:0 0 0 3px rgba(8,156,164,.18);
  }
  .btn{
    appearance:none; border:0; background:var(--brand); color:white;
    padding:10px 14px; border-radius:10px; font-weight:600; cursor:pointer;
    box-shadow:0 6px 16px rgba(8,156,164,.25);
    transition:.15s transform ease, .15s background ease, .15s box-shadow ease;
  }
  .btn:hover{ background:var(--brand-600); transform:translateY(-1px); }
  .btn.secondary{
    background:#e8fcfe; color:#066c73; box-shadow:none; border:1px solid #bdebf0;
  }
  .hint{ font-size:12px; color:#4a6b6e; }
  .qrStage{
    display:grid; place-items:center; min-height:360px; padding:16px;
    background:conic-gradient(from 180deg at 50% 50%, #f2feff, #ffffff, #f2feff);
    border:1px dashed #cfecef; border-radius:12px;
  }
  .qrBox{
    background:white; padding:16px; border-radius:12px; border:1px solid #e8f6f8;
    box-shadow:0 10px 24px rgba(8,156,164,.15);
  }
  .actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
  footer{ text-align:center; color:#5f7b7e; font-size:12px; margin:18px 0 26px; }
</style>
</head>
<body>
  <header>
    <div class="title">QR Code Generator — Offline • Theme <span style="color:#089CA4">#089CA4</span></div>
  </header>

  <div class="wrap">
    <!-- Left: Controls -->
    <section class="card">
      <h2>Content</h2>
      <label for="qrText">Text / URL</label>
      <textarea id="qrText" placeholder="Enter URL, text, mailto:, tel:, or anything…">https://tpv-munich.github.io/SeeLyra-Acty/</textarea>
      <div class="hint">Tip: Paste SharePoint links, internal routes, or deep links to forms.</div>

      <h2 style="margin-top:18px;">Appearance</h2>
      <div class="row">
        <div style="flex:1">
          <label for="size">Size (px)</label>
          <input type="number" id="size" value="320" min="120" max="1024" step="20" />
        </div>
        <div style="width:140px">
          <label for="ec">Error Correction</label>
          <select id="ec">
            <option value="L">L (7%)</option>
            <option value="M" selected>M (15%)</option>
            <option value="Q">Q (25%)</option>
            <option value="H">H (30%)</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div style="flex:1">
          <label for="fg">Foreground</label>
          <input type="color" id="fg" value="#089CA4" />
        </div>
        <div style="flex:1">
          <label for="bg">Background</label>
          <input type="color" id="bg" value="#FFFFFF" />
        </div>
      </div>

      <div class="row" style="margin-top:12px">
        <button class="btn" id="btnGenerate">Generate</button>
        <button class="btn secondary" id="btnClear">Clear</button>
      </div>
      <div class="hint" style="margin-top:6px">Runs entirely in your browser • No third parties • No network calls</div>
    </section>

    <!-- Right: Preview -->
    <section class="card">
      <h2>Preview & Export</h2>
      <div class="qrStage">
        <div id="qrContainer" class="qrBox" role="img" aria-label="QR code preview"></div>
      </div>
      <div class="actions">
        <button class="btn" id="btnPng">Download PNG</button>
        <button class="btn secondary" id="btnCopy">Copy PNG to Clipboard</button>
      </div>
      <div class="hint" id="status" style="margin-top:6px"></div>
    </section>
  </div>

  <footer>Local-only QR generator • Ideal for Storyline Web Object and intranet use.</footer>

  <!-- =========================
       Inline QR library (qrcodejs, MIT)
       ========================= -->
  <script>
  /*! qrcodejs (MIT) - minified for inline use */
  !function(o){function u(o){this.mode=d.MODE_8BIT_BYTE,this.data=o,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var t=[],n=this.data.charCodeAt(e);n>65536?(t[0]=240|(1835008&n)>>>18,t[1]=128|(258048&n)>>>12,t[2]=128|(4032&n)>>>6,t[3]=128|63&n):n>2048?(t[0]=224|(61440&n)>>>12,t[1]=128|(4032&n)>>>6,t[2]=128|63&n):n>128?(t[0]=192|(1984&n)>>>6,t[1]=128|63&n):t[0]=n,this.parsedData.push(t)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function h(o,e){this.typeNumber=o,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function l(o,e){if(void 0==o.length)throw new Error(o.length+"/"+e);for(var r=0;r<o.length&&0==o[r];)r++;this.num=new Array(o.length-r+e);for(var t=0;t<o.length-r;t++)this.num[t]=o[t+r]}function f(o,e){this.totalCount=o,this.dataCount=e}function g(){this.buffer=[],this.length=0}function m(){var o=!1,e=navigator.userAgent;return(-1!=e.indexOf("iPhone")||-1!=e.indexOf("iPad")||-1!=e.indexOf("iPod"))&&(o=!0),o}function p(o,e){for(var r=1,t=i.getRSBlocks(o,e),n=0;n<t.length;n++)r+=t[n].dataCount;var a=new g;for(n=0;n<r;n++)a.put(0,1);return i.getLostPoint(i.createData(o,e,a))}var d={};u.prototype={getLength:function(){return this.parsedData.length},write:function(o){for(var e=0,r=this.parsedData.length;e<r;e++)o.put(this.parsedData[e],8)}},d.PAD0=236,d.PAD1=17,d.createData=function(o,e,r){for(var t=i.getRSBlocks(o,e),n=new g,a=0;a<r.length;a++){var s=r[a];n.put(s.mode,4),n.put(s.getLength(),i.getLengthInBits(s.mode,o)),s.write(n)}for(var h=0,l=0;l<t.length;l++)h+=t[l].dataCount;if(n.getLengthInBits()>8*h)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*h+")");for(n.getLengthInBits()+4<=8*h&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*h||(n.put(d.PAD0,8),n.getLengthInBits()>=8*h));)n.put(d.PAD1,8);return d.createBytes(n,t)};var i=h;i.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i.G15=1335,i.G18=7973,i.G15_MASK=21522,i.getBCHTypeInfo=function(o){for(var e=o<<10;i.getBCHDigit(e)-i.getBCHDigit(i.G15)>=0;)e^=i.G15<<i.getBCHDigit(e)-i.getBCHDigit(i.G15);return(o<<10|e)^i.G15_MASK},i.getBCHTypeNumber=function(o){for(var e=o<<12;i.getBCHDigit(e)-i.getBCHDigit(i.G18)>=0;)e^=i.G18<<i.getBCHDigit(e)-i.getBCHDigit(i.G18);return o<<12|e},i.getBCHDigit=function(o){for(var e=0;0!=o;)e++,o>>>=1;return e},i.getPatternPosition=function(o){return i.PATTERN_POSITION_TABLE[o-1]},i.getMask=function(o,e,r){switch(o){case 0:return(e+r)%2==0;case 1:return e%2==0;case 2:return r%3==0;case 3:return(e+r)%3==0;case 4:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case 5:return e*r%2+e*r%3==0;case 6:return(e*r%2+e*r%3)%2==0;case 7:return(e*r%3+Math.floor((e+r)/2))%2==0;default:throw new Error("bad maskPattern:"+o)}},i.getErrorCorrectPolynomial=function(o){for(var e=new l([1],0),r=0;r<o;r++)e=e.multiply(new l([1,a.gexp(r)],0));return e},i.getLengthInBits=function(o,e){if(1<=e&&e<10)switch(o){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:return 8;case d.MODE_KANJI:return 8;default:throw new Error("mode:"+o)}else if(e<27)switch(o){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+o)}else{if(!(e<41))throw new Error("type:"+e);switch(o){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+o)}}},h.prototype={addData:function(o){this.dataList.push(new u(o)),this.dataCache=null},isDark:function(o,e){if(o<0||this.moduleCount<=o||e<0||this.moduleCount<=e)throw new Error(o+","+e);return this.modules[o][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(o,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[r][t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(o,e),this.typeNumber>=7&&this.setupTypeNumber(o),this.dataCache||(this.dataCache=d.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};var a={};a.glog=function(o){if(o<1)throw new Error("glog("+o+")");return a.LOG_TABLE[o]},a.gexp=function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return a.EXP_TABLE[o]},a.LOG_TABLE=new Array(256),a.EXP_TABLE=new Array(256);for(var s=0;s<8;s++)a.EXP_TABLE[s]=1<<s;for(s=8;s<256;s++)a.EXP_TABLE[s]=a.EXP_TABLE[s-4]^a.EXP_TABLE[s-5]^a.EXP_TABLE[s-6]^a.EXP_TABLE[s-8];for(s=0;s<255;s++)a.LOG_TABLE[a.EXP_TABLE[s]]=s;
  var r=function(o,e){this.num=new Array(o),e&&this.set(e)};r.prototype={set:function(o){for(var e=Math.min(this.num.length,o.length),r=0;r<e;r++)this.num[r]=o[r]},getLength:function(){return this.num.length},at:function(o){return this.num[o]}};
  var rsBlock=function(o,e){this.data=o,this.ecc=new Array(e)},gClass=function(o){r.call(this,o)},rsPoly=[];gClass.prototype=Object.create(r.prototype),gClass.prototype.constructor=gClass,g.prototype={get:function(o){var e=Math.floor(o/8);return 1==(this.buffer[e]>>>7-o%8&1)},put:function(o,e){for(var r=0;r<e;r++)this.putBit(1==(o>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(o){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),o&&(this.buffer[e]|=128>>>this.length%8),this.length++}};
  var v={L:1,M:0,Q:3,H:2};
  // QRCode wrapper
  var y=function(o,e){this._el=o,this._htOption=e};
  y.prototype.draw=function(o){
    var e=this._htOption,r=this._el,t=o.getModuleCount();
    this.clear();
    var n=Math.round(e.width/t),a=Math.round(e.height/t),s=Math.max(1,Math.floor(Math.min(n,a)));
    var canvas=document.createElement("canvas");
    try{canvas.width=t*s;canvas.height=t*s;}catch(err){canvas=null;}
    if(canvas){
      var ctx=canvas.getContext("2d"), light=e.colorLight, dark=e.colorDark, w=canvas.width, h=canvas.height;
      ctx.fillStyle=light;ctx.fillRect(0,0,w,h);ctx.fillStyle=dark;
      for(var row=0;row<t;row++)for(var col=0;col<t;col++)o.isDark(row,col)&&ctx.fillRect(col*s,row*s,s,s);
      r.appendChild(canvas);
    }else{
      var table=document.createElement("table");table.style.borderCollapse="collapse";table.style.backgroundColor=e.colorLight;
      for(var irow=0;irow<o.getModuleCount();irow++){
        var tr=document.createElement("tr");
        for(var icol=0;icol<o.getModuleCount();icol++){
          var td=document.createElement("td");td.style.width=td.style.height=s+"px";
          td.style.backgroundColor=o.isDark(irow,icol)?e.colorDark:e.colorLight;tr.appendChild(td);
        }
        table.appendChild(tr);
      }
      r.appendChild(table);
    }
  };
  y.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)};
  function c(){} // unused canvas check path removed for brevity
  function m2(){var ua=navigator.userAgent;return ua.includes("iPhone")||ua.includes("iPad")||ua.includes("iPod")}
  function H(typeNumber,ecLevel){this.typeNumber=typeNumber,this.errorCorrectLevel=ecLevel,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}
  H.prototype={addData:function(data){this.dataList.push(new u(data)),this.dataCache=null},isDark:function(r,c){if(r<0||this.moduleCount<=r||c<0||this.moduleCount<=c)throw new Error(r+","+c);return this.modules[r][c]},getModuleCount:function(){return this.moduleCount}};
  h.CorrectLevel=v;
  var C=function(el,opts){if(!el)throw new Error("QRCode target element is required");this._android=m2(),this._htOption={width:opts.width||256,height:opts.height||256,colorDark:opts.colorDark||"#000000",colorLight:opts.colorLight||"#ffffff",correctLevel:opts.correctLevel||h.CorrectLevel.H};this._oQRCode=null,this._oDrawing=new y(el,this._htOption),this.makeCode(opts.text||"")};
  C.prototype.makeCode=function(text){this._oQRCode=this._createQRCode(text),this._oDrawing.draw(this._oQRCode)};
  C.prototype._createQRCode=function(text){for(var e=1;e<41;e++){var qr=new h(e,this._htOption.correctLevel);qr.addData(text);qr.make();if(p(e,this._htOption.correctLevel)<=p(e-1,this._htOption.correctLevel))return qr}return qr};
  C.prototype.clear=function(){this._oDrawing.clear()};
  window.QRCode=C;
  </script>

  <!-- =========================
       Your app logic (uses QRCode)
       ========================= -->
  <script>
    const EC_MAP = { L: QRCode.CorrectLevel.L, M: QRCode.CorrectLevel.M, Q: QRCode.CorrectLevel.Q, H: QRCode.CorrectLevel.H };

    const elText = document.getElementById('qrText');
    const elSize = document.getElementById('size');
    const elEC   = document.getElementById('ec');
    const elFG   = document.getElementById('fg');
    const elBG   = document.getElementById('bg');
    const box    = document.getElementById('qrContainer');
    const status = document.getElementById('status');

    function gen() {
      const text = (elText.value || '').trim();
      const size = Math.max(120, Math.min(1024, parseInt(elSize.value || '320', 10)));
      const ec   = EC_MAP[elEC.value] || QRCode.CorrectLevel.M;
      const fg   = elFG.value || '#089CA4';
      const bg   = elBG.value || '#FFFFFF';

      box.innerHTML = '';
      status.textContent = '';

      if (!text) { status.textContent = 'Enter some text/URL above.'; return; }

      new QRCode(box, {
        text: text,
        width: size,
        height: size,
        colorDark: fg,
        colorLight: bg,
        correctLevel: ec
      });
    }

    function getCanvasFromBox() {
      const canvas = box.querySelector('canvas');
      if (canvas) return canvas;
      const img = box.querySelector('img');
      if (img) {
        const s = Math.max(120, Math.min(2048, parseInt(elSize.value || '320', 10)));
        const c = document.createElement('canvas');
        c.width = c.height = s;
        const ctx = c.getContext('2d');
        ctx.fillStyle = elBG.value || '#FFFFFF';
        ctx.fillRect(0,0,s,s);
        ctx.drawImage(img, 0, 0, s, s);
        return c;
      }
      return null;
    }

    async function downloadPNG() {
      const canvas = getCanvasFromBox();
      if (!canvas) return;
      const blob = await new Promise(res => canvas.toBlob(res, 'image/png'));
      const a = document.createElement('a');
      const safeName = (elText.value || 'qr').slice(0,80).replace(/[^a-z0-9\-_.]+/gi,'_');
      a.href = URL.createObjectURL(blob);
      a.download = `${safeName || 'qr'}.png`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(a.href);
    }

    async function copyPNG() {
      try {
        const canvas = getCanvasFromBox();
        if (!canvas || !navigator.clipboard || !window.ClipboardItem) return;
        const blob = await new Promise(res => canvas.toBlob(res, 'image/png'));
        await navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })]);
        alert('QR image copied to clipboard.');
      } catch (e) {
        alert('Copy failed in this browser. Try downloading PNG instead.');
      }
    }

    function clearAll() {
      document.getElementById('qrText').value = '';
      box.innerHTML = '';
      status.textContent = '';
    }

    document.getElementById('btnGenerate').addEventListener('click', gen);
    document.getElementById('btnPng').addEventListener('click', downloadPNG);
    document.getElementById('btnCopy').addEventListener('click', copyPNG);
    document.getElementById('btnClear').addEventListener('click', clearAll);

    // Auto generate initial example
    gen();
  </script>
</body>
</html>
